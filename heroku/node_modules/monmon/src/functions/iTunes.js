const { MessageEmbed } = require('discord.js')
async function iTunes(message, args, options = {}) {
    if (!message) throw new Error('MonMon Err: "message" is not defined')
    if (!args) throw new Error('MonMon Err: "args" is not defined')

    let song = args.join(" ")
	
    const { MessageEmbed } = require('discord.js')
	
            const axios = require(`axios`)
            const body = await axios.get(`https://api.popcatdev.repl.co/itunes?q=${song}`)
            const res = body.data
            
            const embed = new MessageEmbed()
            .setTitle(options.embedTitle ||'iTunes!')
            .setColor(options.embedColor || 'ff0000')
            .setDescription(`Giving info from iTunes for \`${song}\``)
            .addField('**Song:**', `${res.name}`, inline = true)
            .addField('**Artist:**', `${res.artist}`, inline = true)
            .addField('**Album:**', `${res.album}`, inline = true)
            .addField('**Release Date:**', `${res.release_date}`, inline = true)
            .addField('**Price:**', `\`${res.price}\``, inline = true)
            .addField('**Length:**', `\`${res.length}\``, inline = true)
            .addField('**Genre:**', `${res.genre}`, inline = true)
            .addField('**URL:**', `${res.url}`, inline = true)
			
    message.channel.send({embeds: [embed]})
    
    
}

module.exports = iTunes;
